language: python
python:
- '3.7'
install:
- pip install -r requirements-dev.txt
- pip install -r requirements.txt
- pip install twine==1.12
- python3 setup.py sdist bdist_wheel
script:
- coverage run --source=tests -m pytest
- coverage report
- coverage run --source=score -m pytest
- coverage report
- twine check dist/*
# after_success:
# - echo "$DOCKER_PASSWD" | docker login -u "$DOCKER_ID" --password-stdin
# - docker build -t sandjaie/imagescore -f ./Dockerfile .
# - docker tag sandjaie/imagescore sandjaie/imagescore:$TRAVIS_BUILD_NUMBER
# - docker push sandjaie/imagescore
deploy:
  provider: pypi
  user: sandjaie
  password:
    secure: GIt2aRW5pNXHQ3fWj5SGGjXphhZwlbDosDajE/5k73shyAlIzAZo+2rprvCKP85Ywc4WnBOts4Zm9jB1hwn8M/fpIyCn0ejUTH4CPlSdQwXiWlQ7wVUJbg9tzoDfOb6kG3iIfT1FmYIO2xS0e1laZI716LejdWZMAQejwYVKt0Xcbr2p19ZXNjyCl1y/Dco85LAN65TYVAFQXGUrzT6YqE30nkpoVHPMmXMVbiMnUa2bsDFyFmj+KHvALZyEmhFRmEo3L9owhbTj4FRvZE84LrPMGXhk894mHzQQVrOd30dZE0YIGatHGPFZk0M2IayYlJ82kYYuhp8qS9A78fmGeZA3pdX9wJqIBjFVqJlfIUO7VJ42APNFWKyg9Ni4Kv204OPBnDL7PCvgX6H5gXGpgaUcKRHZ2um1BEEZ4ckLcEZbDv9trFtxXMuWNltveDlYhwL2lmg0Jatm4o4E4Q3ToxD4LuDKvWe5uukPvghoqlHY0bZj5mv0zL+d+FLzOAstqMvAFPKE0siTHg5rm04INlcW2/uh8QduKZDpC4m2xGQ4l+htveckU9TDSlAHtYYK8gpvnEuTclIAyv8TBlvRA6n1O8q0mEzoguRL8MS6XoXTHUCKzSlxhX8C8OPnIC0bkMDMaqMovvLMXRd+oBuxozDgU6zfakJL0ScUA4QYEV4=
  on:
    branch: master
